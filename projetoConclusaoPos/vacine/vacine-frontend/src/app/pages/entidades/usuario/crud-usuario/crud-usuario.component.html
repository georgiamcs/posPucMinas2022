<!-- TODO: verificar porque nao esta aparecendo mensagem de validacao no cep e no logradouro -->
<div class="container">
  <vacine-mensagem-feedback [mensagens]="mensagens"></vacine-mensagem-feedback>
  <fieldset class="border rounded p-2 mb-3">
    <legend class="float-none w-auto h3">
      &nbsp;Cadastro de Usuário&nbsp;
    </legend>
    <div class="crud-grid">
      <form [formGroup]="form">

        <div class="campoTipo">
          <mat-form-field appearance="fill">
            <mat-label>Tipo de Usuário</mat-label>
            <mat-select formControlName="tipo" (selectionChange) ="marcarPerfisDefaultTipoUsuario()">
              <mat-option *ngFor="let tipo of tiposUsuarios" [value]="tipo.valor">
                {{ tipo.valorExibicao }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <div class="campoNome">
          <mat-form-field id="fNome">
            <mat-label id="lbNome">Nome</mat-label>
            <input id="inNome" formControlName="nome" matInput type="text" />
          </mat-form-field>
          <vacine-msg-erro-input
            [form]="form"
            campo="nome"
            validacao="obrigatorio"
          ></vacine-msg-erro-input>
          <vacine-msg-erro-input
            [form]="form"
            campo="nome"
            validacao="formato"
            msgerro="Tamanho mínimo de 3 caracteres e máximo de 100 caracteres"
          ></vacine-msg-erro-input>
        </div>

        <div class="campoCpf">
          <mat-form-field id="fCpf">
            <mat-label id="lbCpf">CPF</mat-label>
            <input
              id="inCpf"
              formControlName="cpf"
              matInput
              type="text"
              mask="000.000.000-99"
            />
          </mat-form-field>
          <vacine-msg-erro-input
            [form]="form"
            campo="cpf"
            validacao="formato"
          ></vacine-msg-erro-input>
        </div>

        <div class="campoEmail">
          <mat-form-field id="fEmail">
            <mat-label id="lbEmail">Email</mat-label>
            <input id="inEmail" formControlName="email" matInput type="email" />
          </mat-form-field>
          <vacine-msg-erro-input
            [form]="form"
            campo="email"
            validacao="obrigatorio"
          ></vacine-msg-erro-input>
          <vacine-msg-erro-input
            [form]="form"
            campo="email"
            validacao="email"
          ></vacine-msg-erro-input>
        </div>

        <div class="campoSenha" *ngIf="habilitaCampoSenha()">
          <mat-form-field id="fSenha">
            <mat-label id="lbSenha">Senha</mat-label>
            <input
              id="inSenha"
              formControlName="senha"
              matInput
              type="password"
            />
          </mat-form-field>
          <vacine-msg-erro-input
            [form]="form"
            campo="senha"
            validacao="obrigatorio"
          ></vacine-msg-erro-input>
          <vacine-msg-erro-input
            [form]="form"
            campo="senha"
            validacao="formato"
            msgerro="Tamanho mínimo de 5 caracteres e máximo de 20 caracteres"
          ></vacine-msg-erro-input>
        </div>

        <div class="campoConfSenha" *ngIf="habilitaCampoSenha()">
          <mat-form-field id="fConfSenha">
            <mat-label id="lbConfSenha">Confirmação de Senha</mat-label>
            <input
              id="inConfSenha"
              formControlName="confSenha"
              matInput
              type="password"
            />
          </mat-form-field>
          <vacine-msg-erro-input
            [form]="form"
            campo="confSenha"
            validacao="obrigatorio"
          ></vacine-msg-erro-input>
          <vacine-msg-erro-input
            [form]="form"
            campo="confSenha"
            validacao="formato"
            msgerro="Tamanho mínimo de 5 caracteres e máximo de 20 caracteres"
          ></vacine-msg-erro-input>
          <vacine-msg-erro-input
            [form]="form"
            campo="confSenha"
            validacao="confirmasenha"
            msgerro="Senha diferente da confirmação"
          ></vacine-msg-erro-input>
        </div>

        <div class="campoTelCel">
          <mat-form-field id="fTelefoneCelular">
            <mat-label id="lbTelefoneCelular">Telefone Celular</mat-label>
            <input
              id="inTelefoneCelular"
              formControlName="tel_celular"
              matInput
              type="text"
              mask="(00) 00000-0000"
            />
          </mat-form-field>
          <vacine-msg-erro-input
            [form]="form"
            campo="tel_celular"
            validacao="formato"
          ></vacine-msg-erro-input>
        </div>

        <div class="campoTelFixo">
          <mat-form-field id="fTelefoneFixo">
            <mat-label id="lbTelefoneFixo">Telefone Fixo</mat-label>
            <input
              id="inTelefoneFixo"
              formControlName="tel_fixo"
              matInput
              type="text"
              mask="(00) 0000-0000"
            />
          </mat-form-field>
          <vacine-msg-erro-input
            [form]="form"
            campo="tel_fixo"
            validacao="formato"
          ></vacine-msg-erro-input>
        </div>

        <fieldset class="border rounded p-2 mb-3">
          <legend class="float-none w-auto h6">
            &nbsp;Perfis do Usuário&nbsp;
          </legend>
          <mat-selection-list formControlName="perfis" color="primary">
            <mat-list-option
              *ngFor="let perfil of perfisEscolher"
              [value]="perfil.valor"
            >
              {{ perfil.valorExibicao | titlecase }}
            </mat-list-option>
          </mat-selection-list>
          <vacine-msg-erro-input
            [form]="form"
            campo="perfis"
            validacao="obrigatorio"
          ></vacine-msg-erro-input>
        </fieldset>

        <fieldset class="border rounded p-2 mb-3" formGroupName="endereco">
          <legend class="float-none w-auto h6">&nbsp;Endereço&nbsp;</legend>
          <div class="campoLogradouro">
            <mat-form-field id="fLogradouro">
              <mat-label id="lbLogradouro">Logradouro</mat-label>
              <input
                id="inLogradouro"
                formControlName="logradouro"
                matInput
                type="text"
              />
            </mat-form-field>
          </div>
          <div class="campoNumero">
            <mat-form-field id="fNumero">
              <mat-label id="lbNumero">Numero</mat-label>
              <input
                id="inNumero"
                formControlName="numero"
                matInput
                type="text"
              />
            </mat-form-field>
          </div>

          <div class="campoComplemento">
            <mat-form-field id="fComplemento">
              <mat-label id="lbComplemento">Complemento</mat-label>
              <input
                id="inComplemento"
                formControlName="complemento"
                matInput
                type="text"
              />
            </mat-form-field>
          </div>

          <div class="campoCep">
            <mat-form-field id="fCep">
              <mat-label id="lbCep">Cep</mat-label>
              <input
                id="inCep"
                formControlName="cep"
                matInput
                type="text"
                mask="00000-000"
              />
            </mat-form-field>
            <vacine-msg-erro-input
              [form]="form"
              campo="cep"
              validacao="formato"
            ></vacine-msg-erro-input>
          </div>
        </fieldset>
      </form>
    </div>
    <div class="botoes-crud">
      <button
        *ngIf="temBotaoAcao()"
        mat-raised-button
        color="primary"
        (click)="salvar()"
        [disabled]="!habilitarBotaoAcao()"
      >
        {{ lbBotaoSalvar }}
      </button>
      <button mat-raised-button (click)="fechar()">
        {{ lbBotaoFechar }}
      </button>
    </div>
  </fieldset>
</div>
